<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Cairo+Play:wght@400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --ink: #0d1117;
      --ink2: #1c2433;
      --surface: #ffffff;
      --surface2: #f8fafc;
      --surface3: #f1f5f9;
      --border: #e2e8f0;
      --border2: #cbd5e1;
      --muted: #94a3b8;
      --text: #1e293b;
      --text2: #475569;

```
  --gold: #b8860b;
  --gold2: #d4a017;
  --gold-light: #fef9e7;
  --gold-border: #f0d060;

  --blue: #1a56db;
  --blue2: #1e40af;
  --blue-light: #eff6ff;
  --blue-border: #93c5fd;

  --green: #047857;
  --green-light: #ecfdf5;
  --green-border: #6ee7b7;

  --amber: #92400e;
  --amber-light: #fffbeb;
  --amber-border: #fcd34d;

  --red: #dc2626;
  --red-light: #fef2f2;
  --red-border: #fca5a5;

  --purple: #7c3aed;
  --purple-light: #f5f3ff;
  --purple-border: #c4b5fd;

  --r: 16px;
  --r2: 12px;
  --r3: 8px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Cairo', 'Cairo Play', 'Noto Kufi Arabic', Tahoma, Arial, sans-serif;
  background: #0d1117;
  background-image:
    radial-gradient(ellipse 900px 600px at 80% -10%, rgba(30,64,175,0.18) 0%, transparent 60%),
    radial-gradient(ellipse 700px 500px at -10% 90%, rgba(4,120,87,0.10) 0%, transparent 55%);
  color: var(--text);
  min-height: 100vh;
  padding: 20px 16px 40px;
}

/* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.page-header {
  max-width: 1120px;
  margin: 0 auto 18px;
  display: flex;
  align-items: center;
  gap: 14px;
}
.logo-badge {
  width: 52px; height: 52px;
  background: linear-gradient(135deg, #1a56db 0%, #1e40af 100%);
  border-radius: 14px;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
  box-shadow: 0 8px 24px rgba(26,86,219,0.35), inset 0 1px 0 rgba(255,255,255,0.15);
  flex-shrink: 0;
}
.page-title-wrap h1 {
  font-size: 22px; font-weight: 900;
  color: #ffffff;
  letter-spacing: -0.3px;
}
.page-title-wrap p {
  font-size: 13px; color: #64748b; font-weight: 600; margin-top: 2px;
}

/* â”€â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card {
  max-width: 1120px;
  margin: 0 auto;
  background: var(--surface);
  border-radius: 22px;
  overflow: hidden;
  box-shadow:
    0 1px 0 rgba(255,255,255,0.06) inset,
    0 32px 64px -16px rgba(0,0,0,0.55),
    0 0 0 1px rgba(255,255,255,0.04);
}

/* â”€â”€â”€ STATUS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.statusbar {
  display: flex; flex-wrap: wrap; align-items: center;
  justify-content: space-between; gap: 10px;
  padding: 14px 20px;
  background: var(--surface2);
  border-bottom: 1px solid var(--border);
}
.pill {
  display: inline-flex; align-items: center; gap: 7px;
  padding: 8px 14px; border-radius: 999px;
  font-weight: 800; font-size: 13px;
  border: 1.5px solid var(--border2);
  background: var(--surface);
  transition: all .2s;
}
.pill.good  { background: var(--green-light); color: var(--green); border-color: var(--green-border); }
.pill.warn  { background: var(--amber-light); color: var(--amber); border-color: var(--amber-border); }
.pill.info  { background: var(--blue-light); color: var(--blue); border-color: var(--blue-border); }
.pill.neutral { background: var(--surface3); color: var(--text2); border-color: var(--border); }

/* â”€â”€â”€ FIELDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.fields-section {
  padding: 20px 20px 14px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(to bottom, #fafbff, #ffffff);
}
.fields-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 14px;
}
@media(max-width:900px){ .fields-grid { grid-template-columns: repeat(3,1fr); } }
@media(max-width:600px){ .fields-grid { grid-template-columns: 1fr 1fr; } }

.field-group label {
  display: block;
  font-size: 12px; font-weight: 900;
  color: var(--text2); margin-bottom: 7px;
  letter-spacing: 0.4px; text-transform: uppercase;
}
input, select, textarea {
  width: 100%;
  border: 1.5px solid var(--border);
  border-radius: var(--r2);
  padding: 10px 12px;
  font-size: 15px;
  font-family: inherit;
  font-weight: 600;
  color: var(--text);
  outline: none;
  background: var(--surface);
  transition: border-color .15s, box-shadow .15s;
}
input:focus, select:focus, textarea:focus {
  border-color: var(--blue);
  box-shadow: 0 0 0 3px rgba(26,86,219,0.12);
}
input[readonly] { background: var(--surface3); color: var(--text2); cursor: default; }
.field-hint { font-size: 11px; color: var(--muted); margin-top: 5px; font-weight: 600; }

/* â”€â”€â”€ TABLE SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.table-section { padding: 16px 20px 20px; }
.table-title {
  font-size: 13px; font-weight: 900; color: var(--text2);
  text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 12px;
  display: flex; align-items: center; gap: 8px;
}
.table-title::after {
  content: ''; flex: 1; height: 1px;
  background: linear-gradient(to left, transparent, var(--border));
}

.table-wrap {
  border: 1.5px solid var(--border);
  border-radius: var(--r);
  overflow: auto;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}
table {
  width: 100%; min-width: 860px;
  border-collapse: separate; border-spacing: 0;
}
thead th {
  position: sticky; top: 0; z-index: 2;
  background: var(--ink);
  color: #e2e8f0;
  padding: 13px 14px;
  font-size: 12px; font-weight: 900;
  text-align: center;
  letter-spacing: 0.4px;
  border-bottom: 2px solid var(--ink2);
}
thead th:first-child { text-align: right; border-radius: 0 var(--r2) 0 0; }
thead th:last-child  { border-radius: 0 0 0 var(--r2); }

tbody tr { transition: background .12s; }
tbody tr:hover { background: #fafbff; }
tbody td {
  padding: 13px 14px;
  border-bottom: 1px solid var(--border);
  font-size: 14px; font-weight: 600;
  vertical-align: top;
}
tbody tr:last-child td { border-bottom: none; }
td.col-site  { width: 28%; }
td.col-sys   { width: 16%; text-align: center; color: var(--text2); }
td.col-done  { width: 16%; text-align: center; }
td.col-note  { width: 28%; }
td.col-photo { width: 12%; text-align: center; }

/* separator row */
tr.sep-row td { padding: 6px 14px; background: var(--surface2); }
.sep-line { height: 1px; background: linear-gradient(to left, transparent, var(--border2), transparent); }

/* row highlight when has note */
tr.row-noted { background: var(--amber-light); }
tr.row-noted:hover { background: #fef3c7; }

/* check & radio */
.check-lbl {
  display: inline-flex; align-items: center; gap: 8px;
  cursor: pointer; font-weight: 800; font-size: 14px;
  padding: 6px 12px; border-radius: 999px;
  border: 1.5px solid var(--border); background: var(--surface);
  transition: all .15s;
  user-select: none;
}
.check-lbl:hover { border-color: var(--blue); background: var(--blue-light); }
.check-lbl input[type="checkbox"] {
  width: 16px; height: 16px; border: none; border-radius: 4px;
  accent-color: var(--blue); cursor: pointer;
  padding: 0;
}
.check-lbl.is-checked {
  background: var(--green-light); color: var(--green);
  border-color: var(--green-border);
}

.radio-group { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; }
.radio-lbl {
  display: inline-flex; align-items: center; gap: 7px;
  cursor: pointer; font-weight: 800; font-size: 13px;
  padding: 6px 12px; border-radius: 999px;
  border: 1.5px solid var(--border); background: var(--surface);
  transition: all .15s;
  user-select: none;
}
.radio-lbl:hover { border-color: var(--blue); background: var(--blue-light); }
.radio-lbl.sel-yes { background: var(--red-light); color: var(--red); border-color: var(--red-border); }
.radio-lbl.sel-no  { background: var(--green-light); color: var(--green); border-color: var(--green-border); }
.radio-lbl input[type="radio"] { width: 14px; height: 14px; accent-color: var(--blue); padding: 0; border: none; }

textarea { min-height: 60px; resize: vertical; font-size: 14px; }
textarea.has-note { background: var(--amber-light); border-color: var(--amber-border); color: #7c2d12; font-weight: 800; }
textarea.missing { border-color: var(--red); background: var(--red-light); }
.note-hint { font-size: 11px; font-weight: 900; color: var(--amber); margin-top: 5px; }

/* â”€â”€â”€ PHOTO UPLOAD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.photo-btn {
  position: relative;
  display: inline-flex; align-items: center; gap: 6px;
  padding: 7px 12px; border-radius: var(--r2);
  font-size: 12px; font-weight: 800;
  border: 1.5px solid var(--border);
  background: var(--surface);
  cursor: pointer;
  transition: all .15s;
}
.photo-btn:hover { border-color: var(--blue); background: var(--blue-light); }
.photo-btn.has-photo {
  background: var(--purple-light); color: var(--purple);
  border-color: var(--purple-border);
}
.photo-btn input[type="file"] {
  position: absolute; width: 100%; height: 100%;
  opacity: 0; cursor: pointer; inset: 0; padding: 0; border: none;
}
.photo-preview {
  display: none;
  margin-top: 8px;
  border-radius: var(--r2);
  overflow: hidden;
  border: 1.5px solid var(--border);
  position: relative;
}
.photo-preview.show { display: block; }
.photo-preview img {
  width: 100%; height: auto;
  display: block;
}
.photo-remove {
  position: absolute;
  top: 6px; left: 6px;
  background: var(--red);
  color: white;
  border: none;
  border-radius: 6px;
  padding: 4px 10px;
  font-size: 11px; font-weight: 900;
  cursor: pointer;
  transition: all .15s;
}
.photo-remove:hover {
  background: #b91c1c;
  transform: scale(1.05);
}

/* â”€â”€â”€ SIGNATURE SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.signature-section {
  padding: 16px 20px 20px;
  border-top: 1px solid var(--border);
  background: var(--surface2);
}
.signature-title {
  font-size: 13px; font-weight: 900; color: var(--text2);
  text-transform: uppercase; letter-spacing: 0.5px;
  margin-bottom: 12px;
}
.signature-wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
@media(max-width:700px){ .signature-wrapper { grid-template-columns: 1fr; } }

.signature-box {
  border: 1.5px solid var(--border);
  border-radius: var(--r);
  background: var(--surface);
  overflow: hidden;
}
.signature-header {
  padding: 10px 14px;
  background: var(--surface3);
  border-bottom: 1.5px solid var(--border);
  font-size: 13px; font-weight: 800;
  color: var(--text2);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.signature-canvas-wrap {
  position: relative;
  background: white;
  height: 160px;
}
canvas.signature-canvas {
  display: block;
  width: 100%;
  height: 100%;
  cursor: crosshair;
  touch-action: none;
}
.signature-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 13px;
  font-weight: 600;
  pointer-events: none;
}
.signature-placeholder.hidden { display: none; }
.sig-clear-btn {
  background: transparent;
  border: none;
  color: var(--red);
  font-size: 12px;
  font-weight: 800;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 6px;
  transition: all .15s;
}
.sig-clear-btn:hover {
  background: var(--red-light);
}

/* â”€â”€â”€ ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.actions {
  padding: 14px 20px 20px;
  display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap;
  background: var(--surface2);
  border-top: 1px solid var(--border);
}
.actions-left, .actions-right {
  display: flex; gap: 10px; flex-wrap: wrap;
}
.btn {
  display: inline-flex; align-items: center; gap: 9px;
  padding: 11px 22px; border: none; border-radius: var(--r2);
  font-family: inherit; font-size: 15px; font-weight: 900;
  cursor: pointer; transition: all .15s;
}
.btn:disabled { opacity: .4; cursor: not-allowed; }
.btn-ghost { background: var(--surface3); color: var(--text2); border: 1.5px solid var(--border); }
.btn-ghost:hover:not(:disabled) { background: var(--border); color: var(--text); }
.btn-primary {
  background: linear-gradient(135deg, #1a56db 0%, #1e40af 100%);
  color: #fff;
  box-shadow: 0 4px 14px rgba(26,86,219,0.35);
}
.btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
  box-shadow: 0 6px 20px rgba(26,86,219,0.45);
  transform: translateY(-1px);
}

/* â”€â”€â”€ PROGRESS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.progress-wrap { height: 4px; background: var(--border); border-radius: 999px; overflow: hidden; margin: 6px 0; }
.progress-fill { height: 100%; border-radius: 999px; background: linear-gradient(to left, #1a56db, #047857); transition: width .4s cubic-bezier(.4,0,.2,1); }

/* â”€â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toast {
  position: fixed; bottom: 20px; inset-inline: 16px;
  display: flex; justify-content: center;
  pointer-events: none; z-index: 9999;
}
.toast-inner {
  pointer-events: auto;
  max-width: 500px; width: 100%;
  background: var(--ink); color: #e2e8f0;
  border-radius: 14px;
  padding: 13px 18px;
  font-weight: 800; font-size: 14px;
  box-shadow: 0 16px 40px rgba(0,0,0,0.4);
  display: none;
  border: 1px solid rgba(255,255,255,0.08);
}
.toast-inner.show { display: block; animation: toastIn .25s ease; }
@keyframes toastIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

/* â”€â”€â”€ PRINT ONLY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.print-only { display: none !important; }

@media print {
  @page { size: A4; margin: 10mm 12mm; }
  * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  body { background: #fff !important; padding: 0 !important; }
  .no-print { display: none !important; }
  .print-only { display: block !important; }
  .page-header { display: none !important; }
  .card { box-shadow: none !important; border-radius: 0 !important; max-width: none !important; border: none !important; }

  .print-header {
    display: flex !important;
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
    padding: 0 0 10px 0;
    margin: 0 0 10px 0;
    border-bottom: 3px solid #1e3a8a;
  }
  .print-logo {
    width: 44px; height: 44px;
    background: #1e3a8a;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; color: #fff;
    flex-shrink: 0;
  }
  .print-org { flex: 1; }
  .print-org h2 { font-size: 13px; font-weight: 900; color: #1e3a8a; margin: 0; }
  .print-org h3 { font-size: 11px; font-weight: 700; color: #475569; margin: 3px 0 0; }
  .print-meta-right { text-align: left; font-size: 10px; font-weight: 800; color: #475569; white-space: nowrap; }
  .print-meta-right div + div { margin-top: 3px; }

  .print-meta-row {
    display: grid !important;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
    padding: 9px 12px;
    background: #f8fafc !important;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    margin-bottom: 12px;
    font-size: 11px; font-weight: 900; color: #1e293b;
  }
  .print-meta-row span { display: block; }
  .print-meta-row .meta-lbl { font-size: 10px; color: #64748b; font-weight: 700; margin-bottom: 2px; }
  .print-meta-row .meta-val { font-size: 12px; font-weight: 900; color: #1e3a8a; }

  .table-section { padding: 0 !important; }
  .table-wrap { border: 1.5px solid #e2e8f0 !important; border-radius: 8px !important; overflow: hidden !important; }
  table { min-width: 0 !important; }

  thead th {
    background: #1e3a8a !important;
    color: #e2e8f0 !important;
    padding: 8px 10px !important;
    font-size: 10px !important; font-weight: 900 !important;
    border-bottom: 2px solid #1e40af !important;
  }

  tbody td {
    padding: 8px 10px !important;
    font-size: 10px !important; font-weight: 600 !important;
    border-bottom: 1px solid #e2e8f0 !important;
  }
  tr.sep-row td { background: #f8fafc !important; padding: 4px 10px !important; }
  tr.row-noted { background: #fffbeb !important; }

  .statusbar, .fields-section, .actions, .signature-section { display: none !important; }
  textarea, .note-hint { display: none !important; }

  .print-note {
    display: block !important;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 5px 8px;
    font-size: 10px; font-weight: 600;
    min-height: 22px;
    white-space: pre-wrap; word-break: break-word;
    color: #475569;
  }
  .print-note.noted {
    background: #fffbeb !important;
    border-color: #fcd34d !important;
    color: #7c2d12 !important; font-weight: 800 !important;
  }

  .check-lbl, .radio-group, .photo-btn, .photo-preview { display: none !important; }
  .print-done-text { display: block !important; font-size: 11px !important; font-weight: 900 !important; }
  .print-done-text.done { color: #047857 !important; }
  .print-done-text.not-done { color: #94a3b8 !important; }

  .print-photo {
    display: block !important;
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
  }

  .print-signatures {
    display: grid !important;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 16px;
    padding-top: 12px;
    border-top: 1px solid #e2e8f0;
  }
  .print-sig-box {
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 8px;
  }
  .print-sig-box h4 {
    font-size: 10px;
    font-weight: 800;
    color: #1e3a8a;
    margin-bottom: 6px;
  }
  .print-sig-box img {
    width: 100%;
    height: auto;
    max-height: 80px;
    object-fit: contain;
  }
  .print-sig-box .no-sig {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #94a3b8;
    font-size: 10px;
    border: 1px dashed #e2e8f0;
    border-radius: 4px;
  }

  .print-footer {
    display: flex !important;
    justify-content: center;
    align-items: center;
    margin-top: 12px;
    padding-top: 8px;
    border-top: 1px solid #e2e8f0;
    font-size: 10px; color: #64748b; font-weight: 700;
  }
}
```

  </style>
</head>
<body>

  <div class="page-header no-print">
    <div class="logo-badge">ğŸ”</div>
    <div class="page-title-wrap">
      <h1>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</h1>
      <p>Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ â€” Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø±Ø¦ÙŠØ³</p>
    </div>
  </div>

  <div class="card" id="card">
    <!-- â”€â”€ Status Bar â”€â”€ -->
    <div class="statusbar no-print">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
        <span class="pill warn" id="readyBadge">âš  ÙŠÙ„Ø²Ù… ØªØ£ÙƒÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯</span>
        <span class="pill neutral" id="empBadge">â€”</span>
      </div>
      <div style="min-width:160px;">
        <div class="progress-wrap">
          <div class="progress-fill" id="progressFill" style="width:0%"></div>
        </div>
        <div style="font-size:11px;color:var(--muted);font-weight:700;text-align:center;margin-top:4px;" id="progressLabel">0 / 0</div>
      </div>
    </div>

```
<!-- â”€â”€ Print Header â”€â”€ -->
<div class="print-header print-only">
  <div class="print-logo">ğŸ”</div>
  <div class="print-org">
    <h2>Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ â€” Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø±Ø¦ÙŠØ³</h2>
    <h3>Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</h3>
  </div>
  <div class="print-meta-right">
    <div>Ø§Ù„ØªØ§Ø±ÙŠØ®: <strong id="printDate">â€”</strong></div>
    <div>Ø§Ù„ÙˆÙ‚Øª: <strong id="printTime">â€”</strong></div>
  </div>
</div>

<!-- â”€â”€ Print Meta Row â”€â”€ -->
<div class="print-meta-row print-only">
  <div>
    <div class="meta-lbl">Ø§Ù„Ø§Ø³Ù…</div>
    <div class="meta-val" id="pName">â€”</div>
  </div>
  <div>
    <div class="meta-lbl">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</div>
    <div class="meta-val" id="pEmp">â€”</div>
  </div>
  <div>
    <div class="meta-lbl">Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</div>
    <div class="meta-val" id="pShift">â€”</div>
  </div>
</div>

<!-- â”€â”€ Fields â”€â”€ -->
<div class="fields-section no-print">
  <div class="fields-grid">
    <div class="field-group">
      <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
      <input id="empNo" inputmode="numeric" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù…" />
      <div class="field-hint">ØªØ¹Ø¨Ø¦Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø±Ù</div>
    </div>
    <div class="field-group">
      <label>Ø§Ù„Ø§Ø³Ù…</label>
      <input id="guardName" placeholder="ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§" />
    </div>
    <div class="field-group">
      <label>Ø§Ù„ÙˆØ±Ø¯ÙŠØ©</label>
      <select id="shift">
        <option value="">Ø§Ø®ØªØ±</option>
        <option value="Ø£">Ø£</option>
        <option value="Ø¨">Ø¨</option>
        <option value="Ø¬">Ø¬</option>
        <option value="Ø¯">Ø¯</option>
      </select>
    </div>
    <div class="field-group">
      <label>Ø§Ù„ØªØ§Ø±ÙŠØ®</label>
      <input id="date" readonly />
      <div class="field-hint">ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>
    </div>
    <div class="field-group">
      <label>Ø§Ù„ÙˆÙ‚Øª</label>
      <input id="time" readonly />
      <div class="field-hint">ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>
    </div>
  </div>
</div>

<!-- â”€â”€ Table â”€â”€ -->
<div class="table-section">
  <div class="table-title no-print">ğŸ“‹ Ø¨Ù†ÙˆØ¯ Ø§Ù„ØªÙØªÙŠØ´</div>
  <div class="table-wrap">
    <table id="sitesTable">
      <thead>
        <tr>
          <th style="text-align:right;">Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
          <th>Ø§Ù„Ø£Ù†Ø¸Ù…Ø©</th>
          <th style="width:150px;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…ØªØ®Ø°</th>
          <th>Ø§Ù„ØµÙˆØ±Ø©</th>
        </tr>
      </thead>
      <tbody id="sitesBody"></tbody>
    </table>
  </div>
</div>

<!-- â”€â”€ Signature Section â”€â”€ -->
<div class="signature-section no-print">
  <div class="signature-title">ğŸ“ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</div>
  <div class="signature-wrapper" style="grid-template-columns: 1fr; max-width: 600px;">
    <div class="signature-box">
      <div class="signature-header">
        <span>ØªÙˆÙ‚ÙŠØ¹ Ù…Ù„Ø§Ø­Ø¸ Ø§Ù„Ù†ÙˆØ¨Ø©</span>
        <button class="sig-clear-btn" id="clearInspectorSig">Ù…Ø³Ø­</button>
      </div>
      <div class="signature-canvas-wrap">
        <canvas class="signature-canvas" id="inspectorCanvas"></canvas>
        <div class="signature-placeholder" id="inspectorPlaceholder">Ø§Ø¶ØºØ· Ø£Ùˆ Ø§Ø±Ø³Ù… Ù„Ù„ØªÙˆÙ‚ÙŠØ¹</div>
      </div>
    </div>
  </div>
</div>

<!-- â”€â”€ Print Signatures â”€â”€ -->
<div class="print-signatures print-only" style="grid-template-columns: 1fr; max-width: 400px;">
  <div class="print-sig-box">
    <h4>ØªÙˆÙ‚ÙŠØ¹ Ù…Ù„Ø§Ø­Ø¸ Ø§Ù„Ù†ÙˆØ¨Ø©</h4>
    <img id="printInspectorSig" style="display:none;" />
    <div class="no-sig" id="noInspectorSig">Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙˆÙ‚ÙŠØ¹</div>
  </div>
</div>

<!-- â”€â”€ Print Footer â”€â”€ -->
<div class="print-footer print-only">
  <div>Ø·ÙØ¨Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ÙŠÙŠÙƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
</div>

<!-- â”€â”€ Actions â”€â”€ -->
<div class="actions no-print">
  <div class="actions-left">
    <button class="btn btn-ghost" id="btnClear">ğŸ—‘ Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button>
  </div>
  <div class="actions-right">
    <button class="btn btn-primary" id="btnPrint" disabled>ğŸ“„ ØªØµØ¯ÙŠØ± PDF</button>
  </div>
</div>
```

  </div>

  <div class="toast"><div class="toast-inner" id="toastBox"></div></div>

  <script>
    /* â”€â”€â”€ Data â”€â”€â”€ */
    const empDB = {
      "95175":  { name: "Ø³Ù„Ø·Ø§Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ",   shift: "Ø£" },
      "88840":  { name: "Ù…Ø­Ù…Ø¯ Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ",     shift: "Ø¨" },
      "95052":  { name: "Ø¨Ø¯Ø± Ù…Ø³ÙØ± Ø§Ù„Ø§Ø­Ù…Ø±ÙŠ",       shift: "Ø¨" },
      "81540":  { name: "Ø³Ø¹ÙŠØ¯ Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„Ø³Ø¹ÙŠØ¯",      shift: "Ø¬" },
      "106007": { name: "Ù†Ø§ØµØ± Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„Ø³Ø¨ÙŠØ¹ÙŠ",     shift: "Ø¯" },
      "84642":  { name: "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ù…Ø­Ù…Ø¯ Ø§Ù„ ØµÙÙŠØ§Ù†",  shift: "Ø¯" }
    };

    const sites = [
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ A â€” Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø®Ø§Ù…Ø³ ÙˆØ§Ù„Ø£Ø±Ø¶ÙŠ ÙˆØ§Ù„Ù…ÙˆØ§Ù‚Ù (LG - B)", systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ + Ø§ÙƒØ³Ø³ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨" },
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ B â€” Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø®Ø§Ù…Ø³ ÙˆØ§Ù„Ø£Ø±Ø¶ÙŠ ÙˆØ§Ù„Ù…ÙˆØ§Ù‚Ù (LG - B)", systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ + Ø§ÙƒØ³Ø³ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨" },
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ C â€” Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø£Ø±Ø¶ÙŠ ÙˆØ§Ù„Ù…ÙˆØ§Ù‚Ù (LG - B)",          systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ + Ø§ÙƒØ³Ø³ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨" },
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø§Øª â€” Ù…Ù‚Ø§Ø¨Ù„ Ø¨Ø±Ø¬ B",                        systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ†" },
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø§Øª â€” Ø£Ù…Ø§Ù… Ù…Ø¨Ù†Ù‰ D",                        systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ + Ø§ÙƒØ³Ø³ Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨" },
      { type:"check", site:"Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© + Ø§Ù„Ù…ØµØ¯Ø§Øª Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ© Ù„Ù„Ù…ÙˆØ§Ù‚Ù",     systems:"Ø¥ØºÙ„Ø§Ù‚ Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù…ØµØ¯Ø§Øª" },
      { type:"sep" },
      { type:"check", site:"Ù…Ø¨Ù†Ù‰ Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª Ø§Ù„Ø¯Ø§ØªØ§ Ø³Ù†ØªØ±",                         systems:"Ø§Ù„Ø£Ø¨ÙˆØ§Ø¨ ÙˆØ§Ù„Ø§ÙƒØ³Ø³" },
      { type:"sep" },
      { type:"radio", site:"Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø§Øª",                                          systems:"â€”", options:["ÙŠÙˆØ¬Ø¯","Ù„Ø§ ÙŠÙˆØ¬Ø¯"], requireNoteOnYes:true },
      { type:"radio", site:"ÙˆØ¬ÙˆØ¯ Ù…ÙˆØ§Ø¯ Ù…Ø®Ø²Ù†Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®Ø§Ù„ÙØ©",                     systems:"â€”", options:["ÙŠÙˆØ¬Ø¯","Ù„Ø§ ÙŠÙˆØ¬Ø¯"], requireNoteOnYes:true },
    ];

    /* â”€â”€â”€ State â”€â”€â”€ */
    const $ = id => document.getElementById(id);
    const state = { 
      checked:{}, 
      radio:{}, 
      notes:{},
      photos: {},
      signatures: {
        inspector: null
      }
    };

    /* â”€â”€â”€ Helpers â”€â”€â”€ */
    function toast(msg, dur=2600) {
      const b = $("toastBox");
      b.textContent = msg;
      b.classList.add("show");
      clearTimeout(toast._t);
      toast._t = setTimeout(() => b.classList.remove("show"), dur);
    }

    function normalizeNum(s) {
      const map = {"Ù ":"0","Ù¡":"1","Ù¢":"2","Ù£":"3","Ù¤":"4","Ù¥":"5","Ù¦":"6","Ù§":"7","Ù¨":"8","Ù©":"9"};
      return String(s||"").trim().replace(/[Ù -Ù©]/g, d => map[d]||d).replace(/[^0-9]/g,"");
    }

    function esc(s) {
      return String(s||"")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;");
    }

    function countItems() {
      return sites.filter(r => r.type !== "sep");
    }

    function countDone() {
      let n=0;
      sites.forEach((r,i)=>{
        if(r.type==="sep") return;
        if(r.type==="radio" && state.radio[i] !== undefined) n++;
        if(r.type==="check" && state.checked[i] === true) n++;
      });
      return n;
    }

    function allChecked() {
      return countDone() === countItems().length;
    }

    function validateNotes() {
      for(let i=0;i<sites.length;i++){
        const r = sites[i];
        if(r.type==="radio" && r.requireNoteOnYes && state.radio[i]===r.options[0]){
          if(!(state.notes[i]||"").trim()) return {valid:false, index:i};
        }
      }
      return {valid:true};
    }

    function updateProgress() {
      const total = countItems().length;
      const done  = countDone();
      const pct   = total ? Math.round(done/total*100) : 0;
      $("progressFill").style.width = pct + "%";
      $("progressLabel").textContent = `${done} / ${total}`;
    }

    function setReadyBadge() {
      const ready = allChecked();
      const b = $("readyBadge");
      b.classList.remove("good","warn","info");
      if(ready){
        b.classList.add("good");
        b.textContent = "âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØµØ¯ÙŠØ±";
      } else {
        b.classList.add("warn");
        b.textContent = "âš  ÙŠÙ„Ø²Ù… ØªØ£ÙƒÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯";
      }
      $("btnPrint").disabled = !ready;
      updateProgress();
    }

    function setEmpBadge(type, text) {
      const b = $("empBadge");
      b.className = "pill " + type;
      b.textContent = text;
    }

    function updatePrintMeta() {
      $("printDate").textContent = $("date").value || "â€”";
      $("printTime").textContent = $("time").value || "â€”";
      $("pName").textContent  = $("guardName").value || "â€”";
      $("pEmp").textContent   = $("empNo").value || "â€”";
      $("pShift").textContent = $("shift").value || "â€”";

      // Update print signature
      if(state.signatures.inspector) {
        $("printInspectorSig").src = state.signatures.inspector;
        $("printInspectorSig").style.display = "block";
        $("noInspectorSig").style.display = "none";
      } else {
        $("printInspectorSig").style.display = "none";
        $("noInspectorSig").style.display = "flex";
      }
    }

    function updateDateTime() {
      const now  = new Date();
      const yyyy = now.getFullYear();
      const mm   = String(now.getMonth()+1).padStart(2,"0");
      const dd   = String(now.getDate()).padStart(2,"0");
      const hh   = String(now.getHours()).padStart(2,"0");
      const mi   = String(now.getMinutes()).padStart(2,"0");
      $("date").value = `${yyyy}-${mm}-${dd}`;
      $("time").value = `${hh}:${mi}`;
      updatePrintMeta();
    }

    /* â”€â”€â”€ Signature Pad â”€â”€â”€ */
    function setupSignaturePad(canvasId, placeholderId, signatureKey) {
      const canvas = $(canvasId);
      const placeholder = $(placeholderId);
      const ctx = canvas.getContext('2d');
      
      let isDrawing = false;
      let hasDrawn = false;

      function resizeCanvas() {
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * window.devicePixelRatio;
        canvas.height = rect.height * window.devicePixelRatio;
        ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        
        ctx.strokeStyle = '#0d1117';
        ctx.lineWidth = 2;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
      }

      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);

      function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        const touch = e.touches ? e.touches[0] : e;
        return {
          x: touch.clientX - rect.left,
          y: touch.clientY - rect.top
        };
      }

      function startDrawing(e) {
        isDrawing = true;
        hasDrawn = true;
        placeholder.classList.add('hidden');
        const pos = getPos(e);
        ctx.beginPath();
        ctx.moveTo(pos.x, pos.y);
      }

      function draw(e) {
        if (!isDrawing) return;
        e.preventDefault();
        const pos = getPos(e);
        ctx.lineTo(pos.x, pos.y);
        ctx.stroke();
      }

      function stopDrawing() {
        if (isDrawing) {
          isDrawing = false;
          state.signatures[signatureKey] = canvas.toDataURL();
          updatePrintMeta();
        }
      }

      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseout', stopDrawing);

      canvas.addEventListener('touchstart', startDrawing);
      canvas.addEventListener('touchmove', draw);
      canvas.addEventListener('touchend', stopDrawing);

      return {
        clear: () => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          hasDrawn = false;
          placeholder.classList.remove('hidden');
          state.signatures[signatureKey] = null;
          updatePrintMeta();
        }
      };
    }

    const inspectorPad = setupSignaturePad('inspectorCanvas', 'inspectorPlaceholder', 'inspector');

    $("clearInspectorSig").addEventListener('click', () => {
      inspectorPad.clear();
      toast("ØªÙ… Ù…Ø³Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹");
    });

    /* â”€â”€â”€ Render â”€â”€â”€ */
    function renderSites() {
      const tb = $("sitesBody");
      tb.innerHTML = "";

      sites.forEach((r,i)=>{
        if(r.type==="sep"){
          const tr = document.createElement("tr");
          tr.className = "sep-row";
          tr.innerHTML = `<td colspan="5"><div class="sep-line"></div></td>`;
          tb.appendChild(tr);
          return;
        }

        const noteText = state.notes[i] || "";
        const hasNote  = noteText.trim().length > 0;
        const isYes    = r.type==="radio" && state.radio[i]===r.options[0];
        const missing  = isYes && r.requireNoteOnYes && !hasNote;
        const isChecked = r.type==="check" && state.checked[i];
        const hasPhoto = state.photos[i];

        const tr = document.createElement("tr");
        if(hasNote) tr.classList.add("row-noted");

        let doneCell = "";
        if(r.type==="radio"){
          const selYes = state.radio[i]===r.options[0];
          const selNo  = state.radio[i]===r.options[1];
          doneCell = `
            <div class="radio-group no-print">
              ${r.options.map(opt=>`
                <label class="radio-lbl ${opt===r.options[0]&&selYes?"sel-yes":""} ${opt===r.options[1]&&selNo?"sel-no":""}">
                  <input type="radio" name="radio_${i}" value="${esc(opt)}" ${state.radio[i]===opt?"checked":""}>
                  <span>${esc(opt)}</span>
                </label>`).join("")}
            </div>
            <div class="print-done-text print-only ${selYes?"not-done":"done"}">${state.radio[i] ? state.radio[i] : "â€”"}</div>`;
        } else {
          doneCell = `
            <label class="check-lbl no-print ${isChecked?"is-checked":""}">
              <input type="checkbox" ${isChecked?"checked":""}>
              <span>${isChecked?"âœ“ ØªÙ…":"ØªØ£ÙƒÙŠØ¯"}</span>
            </label>
            <div class="print-done-text print-only ${isChecked?"done":"not-done"}">${isChecked?"âœ“ ØªÙ…":"â€”"}</div>`;
        }

        tr.innerHTML = `
          <td class="col-site">${esc(r.site)}</td>
          <td class="col-sys">${esc(r.systems)}</td>
          <td class="col-done">${doneCell}</td>
          <td class="col-note">
            <textarea class="no-print ${hasNote?"has-note":""} ${missing?"missing":""}" placeholder="Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª">${esc(noteText)}</textarea>

```
        ${hasNote ? '<div class="note-hint no-print">âš  ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø©</div>' : ''}
        <div class="print-note print-only ${hasNote?"noted":""}">${esc(hasNote?noteText:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª")}</div>
      </td>
      <td class="col-photo">
        <label class="photo-btn no-print ${hasPhoto?"has-photo":""}">
          <span>${hasPhoto?"âœ“ ØµÙˆØ±Ø©":"ğŸ“· Ø¥Ø¶Ø§ÙØ©"}</span>
          <input type="file" accept="image/*" data-index="${i}">
        </label>
        <div class="photo-preview no-print" id="preview_${i}">
          <img src="" alt="ØµÙˆØ±Ø©">
          <button class="photo-remove" data-index="${i}">âœ• Ø­Ø°Ù</button>
        </div>
        ${hasPhoto ? `<img class="print-photo print-only" src="${hasPhoto}" />` : '<div class="print-only" style="font-size:10px;color:#94a3b8;">â€”</div>'}
      </td>`;

    tb.appendChild(tr);

    // Radio events
    if(r.type==="radio"){
      tr.querySelectorAll(`input[type="radio"]`).forEach(inp=>{
        inp.addEventListener("change", ()=>{
          state.radio[i] = inp.value;
          renderSites(); setReadyBadge();
        });
      });
    } else {
      // Checkbox events
      const cb = tr.querySelector(`input[type="checkbox"]`);
      cb.addEventListener("change", ()=>{
        state.checked[i] = cb.checked;
        renderSites(); setReadyBadge();
      });
    }

    // Textarea events
    const ta = tr.querySelector("textarea");
    ta.addEventListener("input", ()=>{
      state.notes[i] = ta.value;
      const noteTextNow = (ta.value || "");
      const hasNoteNow  = noteTextNow.trim().length > 0;

      tr.classList.toggle("row-noted", hasNoteNow);
      ta.classList.toggle("has-note", hasNoteNow);

      const isYesNow = (r.type === "radio" && state.radio[i] === r.options[0]);
      const missingNow = (isYesNow && r.requireNoteOnYes && !hasNoteNow);
      ta.classList.toggle("missing", missingNow);

      const hint = tr.querySelector(".note-hint");
      if(hasNoteNow){
        if(!hint){
          const h = document.createElement("div");
          h.className = "note-hint no-print";
          h.textContent = "âš  ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø©";
          ta.insertAdjacentElement("afterend", h);
        }
      } else {
        if(hint) hint.remove();
      }

      const pn = tr.querySelector(".print-note");
      if(pn){
        pn.textContent = hasNoteNow ? noteTextNow : "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª";
        pn.classList.toggle("noted", hasNoteNow);
      }
    });

    // Photo upload events
    const fileInput = tr.querySelector('input[type="file"]');
    fileInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if(file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          state.photos[i] = ev.target.result;
          renderSites();
          toast("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© âœ“");
        };
        reader.readAsDataURL(file);
      }
    });

    // Photo remove events
    const removeBtn = tr.querySelector('.photo-remove');
    if(removeBtn) {
      removeBtn.addEventListener('click', () => {
        delete state.photos[i];
        renderSites();
        toast("ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø©");
      });
    }

    // Show preview if photo exists
    if(hasPhoto) {
      const preview = tr.querySelector(`#preview_${i}`);
      preview.classList.add('show');
      preview.querySelector('img').src = hasPhoto;
    }
  });

  setReadyBadge();
}

/* â”€â”€â”€ Events â”€â”€â”€ */
$("empNo").addEventListener("input", e=>{
  const v = normalizeNum(e.target.value);
  e.target.value = v;
  if(!v){
    setEmpBadge("neutral","â€”");
    $("guardName").value = "";
    $("shift").value = "";
    updatePrintMeta();
    return;
  }
  if(empDB[v]){
    $("guardName").value = empDB[v].name;
    $("shift").value     = empDB[v].shift;
    setEmpBadge("good","âœ… ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¸Ù");
    toast(`Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ ${empDB[v].name} ğŸ‘‹`);
  } else {
    setEmpBadge("warn","â„¹ï¸ Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
  }
  updatePrintMeta();
});

$("guardName").addEventListener("input", updatePrintMeta);
$("shift").addEventListener("change", updatePrintMeta);

$("btnPrint").addEventListener("click", ()=>{
  if(!allChecked()){ toast("Ø£ÙƒÙ…Ù„ ØªØ£ÙƒÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø£ÙˆÙ„Ø§Ù‹"); return; }
  const v = validateNotes();
  if(!v.valid){
    toast("Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± (ÙŠÙˆØ¬Ø¯) ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ù…Ù„Ø§Ø­Ø¸Ø©");
    const rows = $("sitesBody").querySelectorAll("tr");
    const target = sites[v.index].site;
    for(const row of rows){
      if(row.textContent.includes(target)){
        row.scrollIntoView({behavior:"smooth",block:"center"}); break;
      }
    }
    return;
  }
  updatePrintMeta();
  window.print();
});

$("btnClear").addEventListener("click", ()=>{
  if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ù„ØµÙˆØ±ØŸ")) return;
  $("empNo").value = "";
  $("guardName").value = "";
  $("shift").value = "";
  state.checked = {};
  state.radio   = {};
  state.notes   = {};
  state.photos  = {};
  inspectorPad.clear();
  setEmpBadge("neutral","â€”");
  renderSites(); updatePrintMeta();
  toast("ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬");
});

/* â”€â”€â”€ Init â”€â”€â”€ */
updateDateTime();
setInterval(updateDateTime, 30000);
renderSites();
updatePrintMeta();
setEmpBadge("neutral","â€”");
```

  </script>

</body>
</html>