<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>نموذج التفتيش على المواقع</title>

  <style>
    body{
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Tahoma, Arial;
      background:#0f172a;
      margin:0;
      padding:16px;
      color:#fff;
    }
    .card{
      max-width:900px;
      margin:auto;
      background:#111827;
      border-radius:16px;
      padding:20px;
      box-shadow:0 10px 30px rgba(0,0,0,.4);
    }
    h1{margin-top:0;text-align:center}

    label{font-size:14px;color:#cbd5f5}
    input, select, textarea{
      width:100%;
      padding:10px;
      border-radius:10px;
      border:none;
      background:#1e293b;
      color:#fff;
      margin-top:4px;
    }
    input[readonly]{opacity:.85}

    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:14px;
    }

    .gate{
      margin-top:10px;
      padding:8px;
      border-radius:10px;
      font-size:13px;
      text-align:center;
    }
    .good{background:#064e3b;color:#a7f3d0}
    .bad{background:#3f1d1d;color:#fecaca}

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:16px;
    }
    th,td{
      padding:8px;
      border-bottom:1px solid #334155;
      font-size:13px;
    }
    th{color:#93c5fd}

    button{
      margin-top:16px;
      width:100%;
      padding:12px;
      border-radius:12px;
      border:none;
      font-size:16px;
      background:#2563eb;
      color:#fff;
      cursor:pointer;
    }
  </style>
</head>

<body>
<div class="card">
<h1>نموذج التفتيش على المواقع</h1>

<div class="grid">
  <div>
    <label>الرقم الوظيفي</label>
    <input id="empNo" placeholder="مثال: 88835">
  </div>

  <div>
    <label>الاسم</label>
    <input id="empName" readonly>
  </div>

  <div>
    <label>الوردية</label>
    <input id="shift" readonly>
  </div>

  <div>
    <label>التاريخ</label>
    <input id="date" readonly>
  </div>

  <div>
    <label>الوقت</label>
    <input id="time" readonly>
  </div>
</div>

<div id="empStatus" class="gate bad">أدخل الرقم الوظيفي</div>

<table>
<thead>
<tr>
  <th>الموقع</th>
  <th>تم</th>
  <th>ملاحظات</th>
</tr>
</thead>
<tbody>
<tr>
  <td>مبنى A</td>
  <td><input type="checkbox"></td>
  <td><input></td>
</tr>
<tr>
  <td>مبنى B</td>
  <td><input type="checkbox"></td>
  <td><input></td>
</tr>
<tr>
  <td>مبنى C</td>
  <td><input type="checkbox"></td>
  <td><input></td>
</tr>
</tbody>
</table>

<button onclick="exportPDF()">تصدير PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
const empDB = {
  "88835": {name:"فهد الشمري", shift:"ب"},
  "88840": {name:"محمد حمد", shift:"أ"}
};

const empNo = document.getElementById("empNo");
const empName = document.getElementById("empName");
const shift = document.getElementById("shift");
const status = document.getElementById("empStatus");

function normalize(v){
  const map={"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"};
  return String(v||"").replace(/[٠-٩]/g,d=>map[d]).replace(/\D/g,"");
}

function lookup(){
  const no = normalize(empNo.value);
  empNo.value=no;
  if(empDB[no]){
    empName.value=empDB[no].name;
    shift.value=empDB[no].shift;
    status.textContent="تم التعرف على الموظف";
    status.className="gate good";
  }else{
    empName.value="";
    shift.value="";
    status.textContent="رقم غير موجود";
    status.className="gate bad";
  }
}

empNo.addEventListener("blur",lookup);
empNo.addEventListener("keyup",e=>{if(e.key==="Enter")lookup();});

function setDateTime(){
  const n=new Date();
  date.value=n.toISOString().slice(0,10);
  time.value=n.toTimeString().slice(0,5);
}
setDateTime();
setInterval(setDateTime,30000);

function exportPDF(){
  html2pdf().from(document.body).save("inspection.pdf");
}
</script>
</body>
</html>